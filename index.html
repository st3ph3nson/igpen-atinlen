<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ALA-AY Translator</title>

  <style>
    :root{
      --bg:#0b132b;
      --bg2:#111827;
      --card:rgba(255,255,255,0.08);
      --cardSolid:#0f172a;
      --text:#e5e7eb;
      --muted:rgba(229,231,235,0.72);
      --border:rgba(255,255,255,0.16);
      --accent:#38bdf8;
      --accent2:#a78bfa;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:
        radial-gradient(900px 500px at 15% 15%, rgba(56,189,248,.22), transparent 55%),
        radial-gradient(900px 500px at 85% 25%, rgba(167,139,250,.18), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      color:var(--text);
      padding: max(16px, env(safe-area-inset-top)) 16px max(16px, env(safe-area-inset-bottom));
    }

    .wrap{ max-width: 980px; margin: 0 auto; }

    /* ======= HEADER (kept compact so it doesn’t crowd mobile) ======= */
    header{
      margin-bottom: 12px;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(15,23,42,0.35);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .titleRow{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    h1{
      margin:0;
      font-size: 22px;
      line-height: 1.1;
      letter-spacing: .4px;
      font-weight: 900;
      /* “cutting edge” look without external fonts */
      text-transform: uppercase;
    }
    .sub{
      margin: 4px 0 0 0;
      font-size: 12px;
      line-height: 1.35;
      color: var(--muted);
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.18);
      font-size: 12px;
      color: rgba(255,255,255,0.85);
      white-space: nowrap;
    }
    .dot{
      width:8px;height:8px;border-radius:999px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 0 0 3px rgba(56,189,248,0.12);
    }

    /* ======= GRID / CARDS ======= */
    .grid{ display:grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 900px){ .grid{ grid-template-columns: 1fr 1fr; } }

    .card{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(15,23,42,0.35);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 18px 45px rgba(0,0,0,.28);
      overflow:hidden;
    }

    .cardHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px 14px 10px;
      border-bottom: 1px solid rgba(255,255,255,0.10);
    }

    .cardHead .label{
      font-size: 12px;
      color: rgba(255,255,255,0.78);
      letter-spacing: .2px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.18);
      font-size: 13px;
      color: rgba(255,255,255,0.9);
      user-select:none;
      -webkit-user-select:none;
    }
    .pill input{ transform: translateY(1px); }

    .cardBody{ padding: 12px 14px 14px; }

    textarea{
      width:100%;
      min-height: 220px;
      resize: vertical;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(2,6,23,0.45);
      color: rgba(255,255,255,0.92);
      outline:none;
      font-size: 15px;
      line-height: 1.45;
    }
    textarea::placeholder{ color: rgba(255,255,255,0.35); }
    textarea:focus{
      border-color: rgba(56,189,248,.65);
      box-shadow: 0 0 0 4px rgba(56,189,248,.18);
    }

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      margin-top: 10px;
    }

    button{
      appearance:none;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.18);
      color: rgba(255,255,255,0.92);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 800;
      cursor:pointer;
      font-size: 13px;
    }
    button:hover{
      border-color: rgba(56,189,248,.65);
      box-shadow: 0 0 0 4px rgba(56,189,248,.14);
    }

    .small{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(229,231,235,0.70);
      line-height: 1.35;
    }
    .small b{ color: rgba(255,255,255,0.92); }

    .examples{
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px dashed rgba(255,255,255,0.18);
      background: rgba(2,6,23,0.35);
      font-size: 12px;
      color: rgba(229,231,235,0.78);
      line-height: 1.35;
    }
    .examples code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color: rgba(255,255,255,0.92);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="titleRow">
        <h1>ALA-AY</h1>
        <div class="badge"><span class="dot"></span><span>Word Translator</span></div>
      </div>
      <p class="sub">
        Cluster-aware English masking. Consonant-start: <b>{CLUSTER}ala + word + {CLUSTER}ay</b>. Vowel-start: <b>word + lay</b>. <b>I</b> stays <b>I</b>.
      </p>
    </header>

    <div class="grid">
      <div class="card">
        <div class="cardHead">
          <div class="label">English input</div>
          <label class="pill" for="preserveCaps" title="Preserve capitalization">
            <input type="checkbox" id="preserveCaps" checked>
            Preserve Caps
          </label>
        </div>

        <div class="cardBody">
          <textarea id="input" placeholder="Type here... e.g. Today my sister got her diploma."></textarea>

          <div class="controls">
            <button id="copyBtn" type="button">Copy output</button>
            <button id="clearBtn" type="button">Clear</button>
          </div>

          <div class="examples">
            Examples:
            <code>closet → clalaclosetclay</code>,
            <code>throw → thralathrowthray</code>,
            <code>shop → shalashopshay</code>,
            <code>apple → applelay</code>,
            <code>my → malamymay</code>,
            <code>I → I</code>.
          </div>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div class="label">Translated output</div>
          <div class="pill" aria-hidden="true">Live</div>
        </div>

        <div class="cardBody">
          <textarea id="output" readonly placeholder="Output appears here..."></textarea>
          <div class="small">
            Tip: clusters are detected like Pig Latin (e.g., <b>thr</b>, <b>sh</b>, <b>cl</b>). Punctuation stays.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // AEIOU are vowels always.
    // Y is treated as a vowel only when:
    //   - it is NOT the first letter, AND
    //   - the word contains no AEIOU anywhere (fixes "my" => m + y[vowel])
    const CORE_VOWELS = new Set(["a","e","i","o","u"]);

    const inputEl = document.getElementById("input");
    const outputEl = document.getElementById("output");
    const preserveCaps = document.getElementById("preserveCaps");
    const copyBtn = document.getElementById("copyBtn");
    const clearBtn = document.getElementById("clearBtn");

    function isLetter(ch){
      return /^[A-Za-z]$/.test(ch);
    }

    function styleLike(originalWord, translated){
      if (!preserveCaps.checked) return translated;

      const isAllCaps = originalWord.length > 1 && originalWord === originalWord.toUpperCase();
      const isTitle = /^[A-Z][a-z]+$/.test(originalWord);

      if (isAllCaps) return translated.toUpperCase();
      if (isTitle) return translated.charAt(0).toUpperCase() + translated.slice(1);
      return translated;
    }

    function hasCoreVowel(wordLower){
      for (const ch of wordLower){
        if (CORE_VOWELS.has(ch)) return true;
      }
      return false;
    }

    function isVowelAt(wordLower, idx){
      const ch = wordLower[idx];
      if (CORE_VOWELS.has(ch)) return true;

      // Y-as-vowel rule (only if no AEIOU and not first char)
      if (ch === "y" && idx > 0 && !hasCoreVowel(wordLower)) return true;

      return false;
    }

    // Pig-Latin-ish initial consonant cluster: all starting consonants up to first vowel.
    function getInitialCluster(wordLower){
      let i = 0;
      while (i < wordLower.length && !isVowelAt(wordLower, i)) i++;
      return wordLower.slice(0, i); // "" if vowel-start
    }

    function translateWord(word){
      if (!word) return word;

      // Special case: I stays as-is (exactly I or i)
      if (word === "I" || word === "i") return word;

      const low = word.toLowerCase();

      // Vowel-start
      if (isVowelAt(low, 0)){
        return styleLike(word, word + "lay");
      }

      // Consonant-start: cluster ala + word + cluster ay
      const cluster = getInitialCluster(low);
      const c = cluster.length ? cluster : low[0]; // fallback

      return styleLike(word, `${c}ala${word}${c}ay`);
    }

    function translateText(text){
      let i = 0;
      let out = "";

      while (i < text.length){
        const ch = text[i];

        if (isLetter(ch)){
          let j = i;
          while (j < text.length && isLetter(text[j])) j++;
          out += translateWord(text.slice(i, j));
          i = j;
        } else {
          out += ch;
          i++;
        }
      }
      return out;
    }

    function update(){
      outputEl.value = translateText(inputEl.value);
    }

    inputEl.addEventListener("input", update);
    preserveCaps.addEventListener("change", update);

    copyBtn.addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(outputEl.value);
        copyBtn.textContent = "Copied!";
        setTimeout(()=>copyBtn.textContent="Copy output", 900);
      } catch(e){
        alert("Copy failed (clipboard permission). You can manually select + copy.");
      }
    });

    clearBtn.addEventListener("click", () => {
      inputEl.value = "";
      outputEl.value = "";
      inputEl.focus();
      update();
    });

    update();
  </script>
</body>
</html>